<div class="fixed inset-0 bg-shadow-2 flex items-center justify-center sm:p-4 p-0">
  <div class="bg-white sm:rounded-2xl w-full sm:max-w-[420px] min-h-[100dvh] sm:min-h-fit relative sm:border sm:border-line-default">
    <!-- Header with back/close button -->
    <div class="w-full px-5 pt-5 flex">

      <!-- Desktop close button -->
      <button class="text-icon-subtler sm:block hidden ml-auto" [disabled]="isLoading" (click)="onClose()">
        <close-icon color="currentcolor" />
      </button>
    </div>
 
    <!-- Modal content -->
    <div class="px-8 pb-8 pt-12">
      <div class="flex flex-col gap-4 items-center text-center mb-8">
        <h1 class="text-xl font-bold text-text-bolder">
          {{ getTitle() }}
        </h1>
        
        <p class="text-sm text-text-subtle">
          {{ getSubtitle() }}
        </p>
      </div>
 
      <!-- Verification Methods -->
      <div class="flex flex-col gap-3">
        <!-- Email Method -->
        <div
          *ngIf="methods.email.isAvailable"
          (click)="selectMethod('email')"
          class="flex items-center gap-3 w-full p-3 rounded-lg border border-line-default cursor-pointer"
          [class.bg-surface-selected]="methods.email.type === selectedMethod"
          [class.opacity-50]="isLoading"
          [class.cursor-not-allowed]="isLoading"
        >
          <span class="p-2 rounded-md bg-tint-brand-default flex items-center justify-center">
            <email-icon></email-icon>
          </span>
          <div class="flex items-center gap-2 text-text-subtle">
            <span class="text-sm font-medium">Email</span>
            <span class="text-xs text-text-subtle">{{ methods.email.value }}</span>
          </div>
        </div>
 
        <!-- WhatsApp Method -->
        <!-- <div
          *ngIf="methods.whatsapp.isAvailable"
          (click)="selectMethod('whatsapp')"
          class="flex items-center gap-3 w-full p-3 rounded-lg border border-line-default cursor-pointer"
          [class.bg-surface-selected]="methods.whatsapp.type === selectedMethod"
        >
          <span class="p-2 rounded-md bg-tint-brand-default flex items-center justify-center">
            <whatsapp-icon/>
          </span>
          <div class="flex items-center gap-2 text-text-subtle">
            <span class="text-sm font-medium">Whatapps</span>
            <span class="text-xs text-text-subtle">{{ methods.whatsapp.value }}</span>
          </div>
        </div>
        -->
        
        <!-- SMS Method -->
        <div 
          *ngIf="methods.sms.isAvailable"
          (click)="selectMethod('sms')"
          class="flex items-center gap-3 w-full p-3 rounded-lg border border-line-default cursor-pointer"
          [class.bg-surface-selected]="methods.sms.type === selectedMethod"
          [class.opacity-50]="isLoading"
          [class.cursor-not-allowed]="isLoading"
        >
          <span class="p-2 rounded-md bg-tint-brand-default flex items-center justify-center">
            <sms-square-icon/>
          </span>
          <div class="flex items-center gap-2 text-text-subtle">
            <span class="text-sm font-medium">SMS</span>
            <span class="text-xs text-text-subtle">{{ methods.sms.value }}</span>
          </div>
        </div>
      </div>

      <!-- Loading Indicator -->
      <div *ngIf="isLoading" class="mt-6 flex justify-center items-center">
        <div class="w-8 h-8 rounded-full border-2 border-t-transparent border-primary animate-spin"></div>
      </div>
      
      <!-- Optional Loading Text -->
      <p *ngIf="isLoading && selectedMethod" class="mt-3 text-center text-sm text-text-subtle">
        Mengirim kode verifikasi ke {{ selectedMethod === 'email' ? 'email' : 'SMS' }}...
      </p>
    </div>
  </div>
</div>